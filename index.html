<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morning Briefing</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: #000; color: #fff; padding: 56px 16px 48px; max-width: 600px; margin: 0 auto; 
        }
        h1 { font-size: 24px; font-weight: 700; margin-bottom: 2px; }
        .date { color: #888; font-size: 14px; margin-bottom: 20px; }
        .nav { display: flex; gap: 6px; margin-bottom: 24px; overflow-x: auto; padding-bottom: 4px; }
        .nav button { 
            background: #222; border: none; color: #999; padding: 8px 14px; 
            border-radius: 18px; font-size: 13px; cursor: pointer; white-space: nowrap; 
        }
        .nav button.active { background: #fff; color: #000; }
        .section { display: none; }
        .section.active { display: block; }
        h2 { font-size: 20px; font-weight: 600; margin-bottom: 16px; color: #fff; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .section-header h2 { margin-bottom: 0; }
        .refresh-btn { 
            background: #222; border: none; padding: 8px 12px; border-radius: 8px; 
            cursor: pointer; font-size: 16px; transition: transform 0.3s; 
        }
        .refresh-btn:hover { transform: rotate(180deg); }
        .refresh-btn:active { transform: rotate(180deg) scale(0.9); }
        .refresh-status { color: #888; font-size: 13px; text-align: center; padding: 10px; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        .hero { background: #1a1a1a; border-radius: 14px; overflow: hidden; margin-bottom: 20px; }
        .hero-img { width: 100%; height: 180px; object-fit: cover; background: #222; display: block; }
        .hero-content { padding: 16px 18px 18px; }
        .hero-label { color: #2997ff; font-size: 11px; font-weight: 600; text-transform: uppercase; margin-bottom: 6px; }
        .hero-title { font-size: 19px; font-weight: 600; line-height: 1.3; margin-bottom: 8px; }
        .hero-desc { color: #999; font-size: 14px; line-height: 1.5; margin-bottom: 10px; }
        .hero-meta { color: #666; font-size: 11px; display: flex; gap: 12px; }
        
        .tool-why { 
            background: #333; border-radius: 8px; padding: 12px 14px; margin: 12px 0; 
        }
        .tool-why-title { font-size: 11px; color: #2997ff; font-weight: 600; margin-bottom: 6px; }
        .tool-why-desc { font-size: 13px; color: #ccc; line-height: 1.5; }
        
        .cta-btn { 
            display: inline-block; background: #fff; color: #000; 
            padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 600;
            text-decoration: none; margin-top: 10px; 
        }
        .cta-btn:hover { background: #ddd; }
        
        .tool-item { 
            background: #1a1a1a; border-radius: 12px; padding: 16px; 
            margin-bottom: 12px; 
        }
        .tool-header { display: flex; gap: 12px; align-items: flex-start; margin-bottom: 10px; }
        .tool-icon { 
            width: 44px; height: 44px; border-radius: 10px; 
            display: flex; align-items: center; justify-content: center; font-size: 20px; 
            flex-shrink: 0; 
        }
        .tool-info { flex: 1; }
        .tool-name { font-size: 16px; font-weight: 600; margin-bottom: 3px; }
        .tool-tag { 
            display: inline-block; background: #333; color: #999; 
            padding: 2px 8px; border-radius: 4px; font-size: 11px; margin-bottom: 6px; 
        }
        .tool-desc { color: #888; font-size: 13px; line-height: 1.4; margin-bottom: 10px; }
        .tool-why { 
            background: #333; border-radius: 8px; padding: 10px 12px; margin-bottom: 10px; 
        }
        .tool-why-title { font-size: 11px; color: #2997ff; font-weight: 600; margin-bottom: 4px; }
        .tool-why-desc { font-size: 12px; color: #aaa; line-height: 1.4; }
        .tool-link { color: #fff; text-decoration: none; font-size: 13px; font-weight: 500; }
        .tool-link:hover { text-decoration: underline; }
        
        .list-item { 
            background: #1a1a1a; border-radius: 12px; padding: 14px 16px; 
            margin-bottom: 10px; display: flex; gap: 14px; align-items: flex-start; 
        }
        .list-img { width: 50px; height: 75px; object-fit: cover; border-radius: 4px; background: #222; flex-shrink: 0; }
        .list-info { flex: 1; min-width: 0; }
        .list-title { font-size: 15px; font-weight: 600; margin-bottom: 4px; }
        .list-meta { color: #888; font-size: 12px; margin-bottom: 4px; }
        .list-rating { color: #fbbf24; font-size: 12px; margin-bottom: 4px; }
        
        .loading { color: #555; font-size: 13px; padding: 20px; text-align: center; }
        footer { text-align: center; color: #444; font-size: 11px; margin-top: 32px; padding-top: 20px; border-top: 1px solid #222; }
    </style>
</head>
<body>
    <h1>Morning Briefing</h1>
    <div class="date" id="date"></div>
    <div class="nav">
        <button class="active" data-section="news" onclick="show('news', this)">News</button>
        <button data-section="movies" onclick="show('movies', this)">Movies</button>
        <button data-section="books" onclick="show('books', this)">Books</button>
        <button data-section="tools" onclick="show('tools', this)">Tools</button>
    </div>

    <div id="news" class="section active">
        <div class="section-header">
            <h2>Today's Headlines</h2>
            <button class="refresh-btn" onclick="refreshNews()" title="Refresh news">ðŸ”„</button>
        </div>
        <div id="newsContent"></div>
        <div id="refreshStatus" class="refresh-status" style="display:none;">Updating...</div>
    </div>

    <div id="movies" class="section">
        <h2>Movie Picks</h2>
        <div id="moviesContent"></div>
    </div>

    <div id="books" class="section">
        <h2>Reading List</h2>
        <div id="booksContent"></div>
    </div>

    <div id="tools" class="section">
        <h2>Trending AI Tools</h2>
        <div id="toolsContent"></div>
    </div>

    <footer>Morning Briefing â€¢ Anson</footer>

    <script>
        document.getElementById('date').textContent = new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
        
        function show(id, btn) {
            // Remove active from all sections and buttons
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
            // Add active to selected
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');
            localStorage.setItem('activeTab', id);
        }

        // Refresh news from RSS
        async function refreshNews() {
            const statusEl = document.getElementById('refreshStatus');
            const refreshBtn = document.querySelector('.refresh-btn');
            
            statusEl.style.display = 'block';
            statusEl.textContent = 'ðŸ”„ Fetching latest news...';
            refreshBtn.style.animation = 'spin 1s linear infinite';
            
            try {
                const response = await fetch('data/news.json?t=' + Date.now());
                const news = await response.json();
                
                // Update hero
                const hero = news[0];
                document.querySelector('.hero-title').textContent = hero.title;
                document.querySelector('.hero-meta span:first-child').textContent = hero.source;
                document.querySelector('.hero-meta span:last-child').textContent = hero.time;
                
                // Update list
                const newsHTML = news.slice(1).map(n => `
                    <div class="hero">
                        <img src="${n.image || hero.image}" alt="${n.title}" class="hero-img" onerror="this.style.display='none'">
                        <div class="hero-content">
                            <div class="hero-label">${n.category || 'Technology'}</div>
                            <div class="hero-title">${n.title}</div>
                            <div class="hero-desc">${n.summary || ''}</div>
                            <div class="hero-meta"><span>${n.source}</span><span>${n.time}</span></div>
                        </div>
                    </div>
                `).join('');
                
                document.getElementById('newsContent').innerHTML = newsHTML;
                
                statusEl.textContent = 'âœ… Updated!';
                setTimeout(() => statusEl.style.display = 'none', 2000);
            } catch (e) {
                statusEl.textContent = 'âŒ Failed to update. Pull down to retry.';
                console.error('Refresh error:', e);
            }
            
            refreshBtn.style.animation = '';
        }

        // Restore last active tab
        const lastTab = localStorage.getItem('activeTab') || 'news';
        // Remove default active classes first
        document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        // Restore saved tab
        const activeBtn = document.querySelector(`.nav button[data-section="${lastTab}"]`);
        const activeSection = document.getElementById(lastTab);
        if (activeBtn && activeSection) {
            activeBtn.classList.add('active');
            activeSection.classList.add('active');
        } else {
            // Fallback to news if saved tab doesn't exist
            document.querySelector('.nav button[data-section="news"]').classList.add('active');
            document.getElementById('news').classList.add('active');
        }

        const news = [
            {
                title: 'Amazon in Talks to Invest $50B in OpenAI',
                category: 'Technology',
                summary: 'Amazon is in discussions to invest up to $50 billion in OpenAI, potentially making it a major AI investor.',
                impact: 'Could accelerate AI adoption in AWS cloud services and challenge Microsoft\'s exclusive partnership. If you use AWS or Azure, this affects your AI tool options.',
                source: 'TechCrunch',
                time: '2 hours ago',
                image: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=600&h=300&fit=crop&q=80'
            },
            {
                title: 'SpaceX, Tesla, xAI Merger â€” Elon Musk Exploring Deal',
                category: 'Business',
                summary: 'Musk is reportedly considering merging his companies (SpaceX rockets, Tesla vehicles, xAI chatbot) under one structure.',
                impact: 'Could create a unified AI-to-reality pipeline from Grok to Mars missions. May accelerate autonomous vehicles.',
                source: 'Reuters',
                time: '5 hours ago',
                image: 'https://images.unsplash.com/photo-1516849841032-87cbac4d88f7?w=400&h=200&fit=crop&q=80'
            },
            {
                title: "Apple's $100B AI Bet â€” Monetization Unclear",
                category: 'Company',
                summary: 'Apple has invested heavily in AI features but analysts question how the company will turn this into revenue.',
                impact: 'Affects future iPhone pricing and which AI features remain free. Could influence industry-wide AI monetization.',
                source: 'The Verge',
                time: '8 hours ago',
                image: 'https://images.unsplash.com/photo-1611532736597-de2d4265fba3?w=400&h=200&fit=crop&q=80'
            },
            {
                title: 'AI Content Labels â€” "Nutrition Facts" Proposed',
                category: 'Policy',
                summary: 'A new report proposes mandatory disclosures for AI-generated content, similar to food nutrition labels.',
                impact: 'Helps you distinguish AI-generated articles from human-written news. May become mandatory for all AI content.',
                source: 'The Guardian',
                time: '12 hours ago',
                image: 'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=400&h=200&fit=crop&q=80'
            },
            {
                title: 'GPT-5 and Claude 4 â€” Approaching Human-Level Reasoning',
                category: 'Products',
                summary: 'Insider reports suggest major AI models are getting closer to AGI capabilities.',
                impact: 'Could significantly change how you work with AI assistants. Better reasoning means more complex tasks automated.',
                source: 'Ars Technica',
                time: '1 day ago',
                image: 'https://images.unsplash.com/photo-1620712943543-bcc4688e7485?w=400&h=200&fit=crop&q=80'
            },
            {
                title: 'Five AI Stocks Poised to Reach $1 Trillion',
                category: 'Finance',
                summary: 'Analysts identify the top AI companies positioned for massive growth.',
                impact: 'If you invest in tech, these are stocks to watch. Shows which companies will dominate the AI era.',
                source: 'Motley Fool',
                time: '1 day ago',
                image: 'https://images.unsplash.com/photo-1611974765270-ca12586343bb?w=400&h=200&fit=crop&q=80'
            }
        ];

        document.getElementById('newsContent').innerHTML = news.map(n => `
            <div class="hero">
                <img src="${n.image}" alt="${n.title}" class="hero-img" onerror="this.style.display='none'">
                <div class="hero-content">
                    <div class="hero-label">${n.category}</div>
                    <div class="hero-title">${n.title}</div>
                    <div class="hero-desc">${n.summary}</div>
                    <div class="tool-why">
                        <div class="tool-why-title">WHY IT MATTERS</div>
                        <div class="tool-why-desc">${n.impact}</div>
                    </div>
                    <div class="hero-meta"><span>${n.source}</span><span>${n.time}</span></div>
                </div>
            </div>
        `).join('');

        async function loadMovies() {
            const TMDB_API_KEY = '3783979c6021378e3461274a428e7c64';
            const movieIds = ['152601', '264660', '335984', '603', '545611', '666277'];
            try {
                const promises = movieIds.map(id => 
                    fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${TMDB_API_KEY}`).then(r => r.json())
                );
                const movies = await Promise.all(promises);
                document.getElementById('moviesContent').innerHTML = movies.map(m => `
                    <div class="list-item">
                        <img src="https://image.tmdb.org/t/p/w200${m.poster_path}" alt="${m.title}" class="list-img" onerror="this.style.display='none'">
                        <div class="list-info">
                            <div class="list-title">${m.title}</div>
                            <div class="list-meta">${m.release_date?.split('-')[0] || ''}</div>
                            <div class="list-rating">â˜… ${m.vote_average.toFixed(1)}</div>
                            <div style="color: #888; font-size: 13px; margin-top: 6px;">${m.overview?.substring(0, 80)}...</div>
                        </div>
                    </div>
                `).join('');
            } catch (e) {
                document.getElementById('moviesContent').innerHTML = '<div class="loading">Failed to load movies</div>';
            }
        }

        // Fallback curated books (Open Library covers)
        const fallbackBooks = [
            { title: 'The Singularity Is Nearer', authors: 'Ray Kurzweil', rating: 4.5, isbn: '9780008551091' },
            { title: 'Superintelligence', authors: 'Nick Bostrom', rating: 4.3, isbn: '9780198739838' },
            { title: 'Life 3.0', authors: 'Max Tegmark', rating: 4.4, isbn: '9781101946592' },
            { title: 'The Almanack of Navalman', authors: 'Eric Jorgenson', rating: 4.6, isbn: '9781543664297' },
            { title: 'Atomic Habits', authors: 'James Clear', rating: 4.7, isbn: '9780735211292' }
        ];

        async function loadBooks() {
            const bookQueries = ['isbn:9780465050659', 'isbn:9780374533657', 'isbn:9780812993031', 'isbn:1451648537', '9780316491977'];
            try {
                const promises = bookQueries.map(q => fetch(`https://www.googleapis.com/books/v1/volumes?q=${q}`).then(r => r.json()));
                const results = await Promise.all(promises);
                const books = results.map(r => {
                    const item = r.items?.[0]?.volumeInfo;
                    if (!item) return fallbackBooks.shift() || fallbackBooks[0];
                    return { title: item?.title || 'Unknown', authors: item?.authors?.[0] || 'Unknown', rating: item?.averageRating || 4.0, image: item?.imageLinks?.thumbnail?.replace('http:', 'https:') || fallbackBooks[0].image };
                });
                renderBooks(books.slice(0, 5));
            } catch (e) {
                renderBooks(fallbackBooks);
            }
        }

        function renderBooks(books) {
            document.getElementById('booksContent').innerHTML = books.map(b => {
                const coverUrl = b.isbn 
                    ? `https://covers.openlibrary.org/b/isbn/${b.isbn}-M.jpg` 
                    : 'data:image/svg+xml,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="50" height="75" viewBox="0 0 50 75"><rect fill="%23222" width="50" height="75"/><text fill="%23666" font-size="8" x="50%" y="50%" text-anchor="middle">ðŸ“–</text></svg>');
                return `
                <div class="list-item">
                    <img src="${coverUrl}" alt="${b.title}" class="list-img" onerror="this.style.background='%23222';this.src='data:image/svg+xml,'+encodeURIComponent('<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2250%22 height=%2275%22 viewBox=%220 0 50 75%22><rect fill=%22%23222%22 width=%2250%22 height=%2275%22/><text fill=%22%23666%22 font-size=%228%22 x=%2250%%22 y=%2250%%22 text-anchor=%22middle%22>ðŸ“–</text></svg>')">
                    <div class="list-info">
                        <div class="list-title">${b.title}</div>
                        <div class="list-meta">${b.authors}</div>
                        <div class="list-rating">â˜… ${b.rating}</div>
                    </div>
                </div>
            `}).join('');
        }

        // Curated AI Tools with why it matters
        const curatedTools = [
            { 
                name: 'Cursor', 
                tag: 'Code Editor',
                desc: 'AI-first code editor built on VS Code with intelligent autocomplete and refactoring.',
                why: 'Replaces your dev environment with AI. Write code 2-3x faster with context-aware suggestions.',
                url: 'https://cursor.sh',
                icon: 'âŒ¨ï¸',
                color: '#3b82f6'
            },
            { 
                name: 'Claude', 
                tag: 'AI Assistant',
                desc: 'Anthropic\'s AI assistant excelling at reasoning, writing, and coding tasks.',
                why: 'Best for complex reasoning and nuanced conversations. Use for design reviews and strategy.',
                url: 'https://claude.ai',
                icon: 'ðŸ’¬',
                color: '#dc2626'
            },
            { 
                name: 'Midjourney', 
                tag: 'Image Generation',
                desc: 'AI-powered image generation known for artistic and photorealistic outputs.',
                why: 'Create concept art and visuals instantly. Great for moodboards and design ideation.',
                url: 'https://midjourney.com',
                icon: 'ðŸŽ¨',
                color: '#8b5cf6'
            },
            { 
                name: 'Perplexity', 
                tag: 'AI Search',
                desc: 'AI-powered search engine with cited sources and conversational responses.',
                why: 'Replaces Google for research. Gets you answers with sources, not just links.',
                url: 'https://perplexity.ai',
                icon: 'ðŸ”',
                color: '#10b981'
            },
            { 
                name: 'Bolt.new', 
                tag: 'AI IDE',
                desc: 'Full-stack AI development environment. Build, edit, and deploy in browser.',
                why: 'Spin up complete apps in minutes. Perfect for prototyping and vibe coding.',
                url: 'https://bolt.new',
                icon: 'âš¡',
                color: '#0ea5e9'
            },
            { 
                name: 'v0', 
                tag: 'UI Generator',
                desc: 'Generate React UI components from text descriptions using Vercel AI SDK.',
                why: 'Turn your design specs into working React code instantly.',
                url: 'https://v0.dev',
                icon: 'ðŸ§©',
                color: '#6366f1'
            },
            { 
                name: 'Lovable', 
                tag: 'Vibe Coding',
                desc: 'Build full-stack applications by describing what you want in plain language.',
                why: 'Describe your idea, get a working app. Fastest way from concept to prototype.',
                url: 'https://lovable.dev',
                icon: 'ðŸª„',
                color: '#ec4899'
            },
            { 
                name: 'Figma Make', 
                tag: 'Design to Code',
                desc: 'Turn Figma designs into code with AI. Generate React, HTML/CSS, and iOS components.',
                why: 'Bridge design and development. Auto-generate clean code from your designs.',
                url: 'https://www.figma.com/ai',
                icon: 'ðŸŽ¯',
                color: '#f59e0b'
            }
        ];

        document.getElementById('toolsContent').innerHTML = curatedTools.map(t => `
            <div class="tool-item">
                <div class="tool-header">
                    <div class="tool-icon" style="background: ${t.color}20; color: ${t.color}">${t.icon}</div>
                    <div class="tool-info">
                        <div class="tool-name">${t.name}</div>
                        <div class="tool-tag">${t.tag}</div>
                    </div>
                </div>
                <div class="tool-desc">${t.desc}</div>
                <div class="tool-why">
                    <div class="tool-why-title">WHY IT MATTERS</div>
                    <div class="tool-why-desc">${t.why}</div>
                </div>
                <a href="${t.url}" target="_blank" class="tool-link">Try ${t.name} â†’</a>
            </div>
        `).join('');

        loadMovies();
        loadBooks();
    </script>
</body>
</html>
